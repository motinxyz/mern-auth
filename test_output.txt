
> auth-monorepo@ test /home/home/codes/web/udemy/fullstack-prac/auth
> pnpm --filter @auth/api test && pnpm --filter @auth/core test && pnpm --filter @auth/email test && pnpm --filter @auth/queues test && pnpm --filter @auth/utils test && pnpm --filter @auth/worker test


> @auth/api@1.0.0 test /home/home/codes/web/udemy/fullstack-prac/auth/packages/api
> vitest run --coverage


[1m[46m RUN [49m[22m [36mv4.0.15 [39m[90m/home/home/codes/web/udemy/fullstack-prac/auth/packages/api[39m
      [2mCoverage enabled with [22m[33mv8[39m

 [32mâœ“[39m src/middleware/business/validate.test.ts [2m([22m[2m6 tests[22m[2m)[22m[32m 9[2mms[22m[39m
 [32mâœ“[39m src/middleware/core/errorHandler.test.ts [2m([22m[2m10 tests[22m[2m)[22m[32m 37[2mms[22m[39m
[90mstdout[2m | src/app.test.ts[2m > [22m[2mApp
[22m[39mObservability Config Loaded. Config keys: [
  [32m'env'[39m,           [32m'isTest'[39m,
  [32m'isDevelopment'[39m, [32m'isProduction'[39m,
  [32m'port'[39m,          [32m'redis'[39m,
  [32m'cors'[39m,          [32m'clientUrl'[39m,
  [32m'observability'[39m, [32m'mongo'[39m,
  [32m'redisUrl'[39m
]

[90mstderr[2m | src/app.test.ts[2m > [22m[2mApp[2m > [22m[2mshould return health check response
[22m[39mMOCK LOGGER ERROR: [
  {
    "originalError": {
      "name": "TypeError",
      "message": "Expected result to be array of values",
      "stack": "TypeError: Expected result to be array of values\n    at parseScriptResponse (/home/home/codes/web/udemy/fullstack-prac/auth/node_modules/.pnpm/rate-limit-redis@4.3.1_express-rate-limit@8.2.1_express@5.2.1_/node_modules/rate-limit-redis/dist/index.cjs:40:11)\n    at RedisStore.increment (/home/home/codes/web/udemy/fullstack-prac/auth/node_modules/.pnpm/rate-limit-redis@4.3.1_express-rate-limit@8.2.1_express@5.2.1_/node_modules/rate-limit-redis/dist/index.cjs:201:12)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at file:///home/home/codes/web/udemy/fullstack-prac/auth/node_modules/.pnpm/express-rate-limit@8.2.1_express@5.2.1/node_modules/express-rate-limit/dist/index.mjs:819:33\n    at file:///home/home/codes/web/udemy/fullstack-prac/auth/node_modules/.pnpm/express-rate-limit@8.2.1_express@5.2.1/node_modules/express-rate-limit/dist/index.mjs:796:5"
    },
    "apiError": {
      "name": "HttpError",
      "message": "system:process.errors.unexpected",
      "code": "INTERNAL_ERROR",
      "timestamp": "2025-12-12T13:16:54.530Z",
      "stack": "HttpError: system:process.errors.unexpected\n    at errorHandler (/home/home/codes/web/udemy/fullstack-prac/auth/packages/api/src/middleware/core/errorHandler.ts:101:18)\n    at Layer.handleError (/home/home/codes/web/udemy/fullstack-prac/auth/node_modules/.pnpm/router@2.2.0/node_modules/router/lib/layer.js:116:17)\n    at trimPrefix (/home/home/codes/web/udemy/fullstack-prac/auth/node_modules/.pnpm/router@2.2.0/node_modules/router/index.js:340:13)\n    at /home/home/codes/web/udemy/fullstack-prac/auth/node_modules/.pnpm/router@2.2.0/node_modules/router/index.js:297:9\n    at processParams (/home/home/codes/web/udemy/fullstack-prac/auth/node_modules/.pnpm/router@2.2.0/node_modules/router/index.js:582:12)\n    at next (/home/home/codes/web/udemy/fullstack-prac/auth/node_modules/.pnpm/router@2.2.0/node_modules/router/index.js:291:5)\n    at Layer.handleError (/home/home/codes/web/udemy/fullstack-prac/auth/node_modules/.pnpm/router@2.2.0/node_modules/router/lib/layer.js:111:12)\n    at trimPrefix (/home/home/codes/web/udemy/fullstack-prac/auth/node_modules/.pnpm/router@2.2.0/node_modules/router/index.js:340:13)\n    at /home/home/codes/web/udemy/fullstack-prac/auth/node_modules/.pnpm/router@2.2.0/node_modules/router/index.js:297:9\n    at processParams (/home/home/codes/web/udemy/fullstack-prac/auth/node_modules/.pnpm/router@2.2.0/node_modules/router/index.js:582:12)",
      "statusCode": 500,
      "errors": [],
      "success": false
    }
  },
  "An unexpected server error occurred"
]

[90mstderr[2m | src/app.test.ts[2m > [22m[2mApp[2m > [22m[2mshould return 200 OK for /api-docs/
[22m[39mMOCK LOGGER ERROR: [
  {
    "originalError": {
      "name": "TypeError",
      "message": "Expected result to be array of values",
      "stack": "TypeError: Expected result to be array of values\n    at parseScriptResponse (/home/home/codes/web/udemy/fullstack-prac/auth/node_modules/.pnpm/rate-limit-redis@4.3.1_express-rate-limit@8.2.1_express@5.2.1_/node_modules/rate-limit-redis/dist/index.cjs:40:11)\n    at RedisStore.increment (/home/home/codes/web/udemy/fullstack-prac/auth/node_modules/.pnpm/rate-limit-redis@4.3.1_express-rate-limit@8.2.1_express@5.2.1_/node_modules/rate-limit-redis/dist/index.cjs:201:12)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at file:///home/home/codes/web/udemy/fullstack-prac/auth/node_modules/.pnpm/express-rate-limit@8.2.1_express@5.2.1/node_modules/express-rate-limit/dist/index.mjs:819:33\n    at file:///home/home/codes/web/udemy/fullstack-prac/auth/node_modules/.pnpm/express-rate-limit@8.2.1_express@5.2.1/node_modules/express-rate-limit/dist/index.mjs:796:5"
    },
    "apiError": {
      "name": "HttpError",
      "message": "system:process.errors.unexpected",
      "code": "INTERNAL_ERROR",
      "timestamp": "2025-12-12T13:16:54.576Z",
      "stack": "HttpError: system:process.errors.unexpected\n    at errorHandler (/home/home/codes/web/udemy/fullstack-prac/auth/packages/api/src/middleware/core/errorHandler.ts:101:18)\n    at Layer.handleError (/home/home/codes/web/udemy/fullstack-prac/auth/node_modules/.pnpm/router@2.2.0/node_modules/router/lib/layer.js:116:17)\n    at trimPrefix (/home/home/codes/web/udemy/fullstack-prac/auth/node_modules/.pnpm/router@2.2.0/node_modules/router/index.js:340:13)\n    at /home/home/codes/web/udemy/fullstack-prac/auth/node_modules/.pnpm/router@2.2.0/node_modules/router/index.js:297:9\n    at processParams (/home/home/codes/web/udemy/fullstack-prac/auth/node_modules/.pnpm/router@2.2.0/node_modules/router/index.js:582:12)\n    at next (/home/home/codes/web/udemy/fullstack-prac/auth/node_modules/.pnpm/router@2.2.0/node_modules/router/index.js:291:5)\n    at Layer.handleError (/home/home/codes/web/udemy/fullstack-prac/auth/node_modules/.pnpm/router@2.2.0/node_modules/router/lib/layer.js:111:12)\n    at trimPrefix (/home/home/codes/web/udemy/fullstack-prac/auth/node_modules/.pnpm/router@2.2.0/node_modules/router/index.js:340:13)\n    at /home/home/codes/web/udemy/fullstack-prac/auth/node_modules/.pnpm/router@2.2.0/node_modules/router/index.js:297:9\n    at processParams (/home/home/codes/web/udemy/fullstack-prac/auth/node_modules/.pnpm/router@2.2.0/node_modules/router/index.js:582:12)",
      "statusCode": 500,
      "errors": [],
      "success": false
    }
  },
  "An unexpected server error occurred"
]

[90mstderr[2m | src/app.test.ts[2m > [22m[2mApp[2m > [22m[2mHealth Check Service Status[2m > [22m[2mshould return 503 when the database is not connected
[22m[39mMOCK LOGGER ERROR: [
  {
    "originalError": {
      "name": "TypeError",
      "message": "Expected result to be array of values",
      "stack": "TypeError: Expected result to be array of values\n    at parseScriptResponse (/home/home/codes/web/udemy/fullstack-prac/auth/node_modules/.pnpm/rate-limit-redis@4.3.1_express-rate-limit@8.2.1_express@5.2.1_/node_modules/rate-limit-redis/dist/index.cjs:40:11)\n    at RedisStore.increment (/home/home/codes/web/udemy/fullstack-prac/auth/node_modules/.pnpm/rate-limit-redis@4.3.1_express-rate-limit@8.2.1_express@5.2.1_/node_modules/rate-limit-redis/dist/index.cjs:201:12)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at file:///home/home/codes/web/udemy/fullstack-prac/auth/node_modules/.pnpm/express-rate-limit@8.2.1_express@5.2.1/node_modules/express-rate-limit/dist/index.mjs:819:33\n    at file:///home/home/codes/web/udemy/fullstack-prac/auth/node_modules/.pnpm/express-rate-limit@8.2.1_express@5.2.1/node_modules/express-rate-limit/dist/index.mjs:796:5"
    },
    "apiError": {
      "name": "HttpError",
      "message": "system:process.errors.unexpected",
      "code": "INTERNAL_ERROR",
      "timestamp": "2025-12-12T13:16:54.581Z",
      "stack": "HttpError: system:process.errors.unexpected\n    at errorHandler (/home/home/codes/web/udemy/fullstack-prac/auth/packages/api/src/middleware/core/errorHandler.ts:101:18)\n    at Layer.handleError (/home/home/codes/web/udemy/fullstack-prac/auth/node_modules/.pnpm/router@2.2.0/node_modules/router/lib/layer.js:116:17)\n    at trimPrefix (/home/home/codes/web/udemy/fullstack-prac/auth/node_modules/.pnpm/router@2.2.0/node_modules/router/index.js:340:13)\n    at /home/home/codes/web/udemy/fullstack-prac/auth/node_modules/.pnpm/router@2.2.0/node_modules/router/index.js:297:9\n    at processParams (/home/home/codes/web/udemy/fullstack-prac/auth/node_modules/.pnpm/router@2.2.0/node_modules/router/index.js:582:12)\n    at next (/home/home/codes/web/udemy/fullstack-prac/auth/node_modules/.pnpm/router@2.2.0/node_modules/router/index.js:291:5)\n    at Layer.handleError (/home/home/codes/web/udemy/fullstack-prac/auth/node_modules/.pnpm/router@2.2.0/node_modules/router/lib/layer.js:111:12)\n    at trimPrefix (/home/home/codes/web/udemy/fullstack-prac/auth/node_modules/.pnpm/router@2.2.0/node_modules/router/index.js:340:13)\n    at /home/home/codes/web/udemy/fullstack-prac/auth/node_modules/.pnpm/router@2.2.0/node_modules/router/index.js:297:9\n    at processParams (/home/home/codes/web/udemy/fullstack-prac/auth/node_modules/.pnpm/router@2.2.0/node_modules/router/index.js:582:12)",
      "statusCode": 500,
      "errors": [],
      "success": false
    }
  },
  "An unexpected server error occurred"
]

[90mstderr[2m | src/app.test.ts[2m > [22m[2mApp[2m > [22m[2mHealth Check Service Status[2m > [22m[2mshould return error when Redis is not connected
[22m[39mMOCK LOGGER ERROR: [
  {
    "originalError": {
      "name": "TypeError",
      "message": "Expected result to be array of values",
      "stack": "TypeError: Expected result to be array of values\n    at parseScriptResponse (/home/home/codes/web/udemy/fullstack-prac/auth/node_modules/.pnpm/rate-limit-redis@4.3.1_express-rate-limit@8.2.1_express@5.2.1_/node_modules/rate-limit-redis/dist/index.cjs:40:11)\n    at RedisStore.increment (/home/home/codes/web/udemy/fullstack-prac/auth/node_modules/.pnpm/rate-limit-redis@4.3.1_express-rate-limit@8.2.1_express@5.2.1_/node_modules/rate-limit-redis/dist/index.cjs:201:12)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at file:///home/home/codes/web/udemy/fullstack-prac/auth/node_modules/.pnpm/express-rate-limit@8.2.1_express@5.2.1/node_modules/express-rate-limit/dist/index.mjs:819:33\n    at file:///home/home/codes/web/udemy/fullstack-prac/auth/node_modules/.pnpm/express-rate-limit@8.2.1_express@5.2.1/node_modules/express-rate-limit/dist/index.mjs:796:5"
    },
    "apiError": {
      "name": "HttpError",
      "message": "system:process.errors.unexpected",
      "code": "INTERNAL_ERROR",
      "timestamp": "2025-12-12T13:16:54.584Z",
      "stack": "HttpError: system:process.errors.unexpected\n    at errorHandler (/home/home/codes/web/udemy/fullstack-prac/auth/packages/api/src/middleware/core/errorHandler.ts:101:18)\n    at Layer.handleError (/home/home/codes/web/udemy/fullstack-prac/auth/node_modules/.pnpm/router@2.2.0/node_modules/router/lib/layer.js:116:17)\n    at trimPrefix (/home/home/codes/web/udemy/fullstack-prac/auth/node_modules/.pnpm/router@2.2.0/node_modules/router/index.js:340:13)\n    at /home/home/codes/web/udemy/fullstack-prac/auth/node_modules/.pnpm/router@2.2.0/node_modules/router/index.js:297:9\n    at processParams (/home/home/codes/web/udemy/fullstack-prac/auth/node_modules/.pnpm/router@2.2.0/node_modules/router/index.js:582:12)\n    at next (/home/home/codes/web/udemy/fullstack-prac/auth/node_modules/.pnpm/router@2.2.0/node_modules/router/index.js:291:5)\n    at Layer.handleError (/home/home/codes/web/udemy/fullstack-prac/auth/node_modules/.pnpm/router@2.2.0/node_modules/router/lib/layer.js:111:12)\n    at trimPrefix (/home/home/codes/web/udemy/fullstack-prac/auth/node_modules/.pnpm/router@2.2.0/node_modules/router/index.js:340:13)\n    at /home/home/codes/web/udemy/fullstack-prac/auth/node_modules/.pnpm/router@2.2.0/node_modules/router/index.js:297:9\n    at processParams (/home/home/codes/web/udemy/fullstack-prac/auth/node_modules/.pnpm/router@2.2.0/node_modules/router/index.js:582:12)",
      "statusCode": 500,
      "errors": [],
      "success": false
    }
  },
  "An unexpected server error occurred"
]

[90mstdout[2m | src/app.test.ts[2m > [22m[2mApp[2m > [22m[2mHealth Check Service Status[2m > [22m[2mshould return error when Redis is not connected
[22m[39mDEBUG: response.status [33m500[39m
DEBUG: response.body {
  "success": false,
  "statusCode": 500,
  "message": "system:process.errors.unexpected",
  "errors": []
}

[90mstdout[2m | src/app.test.ts[2m > [22m[2mApp[2m > [22m[2mi18n Middleware in non-test environment
[22m[39mObservability Config Loaded. Config keys: [
  [32m'env'[39m,           [32m'isTest'[39m,
  [32m'isDevelopment'[39m, [32m'isProduction'[39m,
  [32m'port'[39m,          [32m'redis'[39m,
  [32m'cors'[39m,          [32m'clientUrl'[39m,
  [32m'observability'[39m, [32m'mongo'[39m,
  [32m'redisUrl'[39m
]

[90mstderr[2m | src/app.test.ts[2m > [22m[2mApp[2m > [22m[2mi18n Middleware in non-test environment[2m > [22m[2mshould use i18nMiddleware.handle when NODE_ENV is not test
[22m[39mMOCK LOGGER ERROR: [
  {
    "originalError": {
      "name": "TypeError",
      "message": "Expected result to be array of values",
      "stack": "TypeError: Expected result to be array of values\n    at parseScriptResponse (/home/home/codes/web/udemy/fullstack-prac/auth/node_modules/.pnpm/rate-limit-redis@4.3.1_express-rate-limit@8.2.1_express@5.2.1_/node_modules/rate-limit-redis/dist/index.cjs:40:11)\n    at RedisStore.increment (/home/home/codes/web/udemy/fullstack-prac/auth/node_modules/.pnpm/rate-limit-redis@4.3.1_express-rate-limit@8.2.1_express@5.2.1_/node_modules/rate-limit-redis/dist/index.cjs:201:12)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at file:///home/home/codes/web/udemy/fullstack-prac/auth/node_modules/.pnpm/express-rate-limit@8.2.1_express@5.2.1/node_modules/express-rate-limit/dist/index.mjs:819:33\n    at file:///home/home/codes/web/udemy/fullstack-prac/auth/node_modules/.pnpm/express-rate-limit@8.2.1_express@5.2.1/node_modules/express-rate-limit/dist/index.mjs:796:5"
    },
    "apiError": {
      "name": "HttpError",
      "message": "system:process.errors.unexpected",
      "code": "INTERNAL_ERROR",
      "timestamp": "2025-12-12T13:16:54.611Z",
      "stack": "HttpError: system:process.errors.unexpected\n    at errorHandler (/home/home/codes/web/udemy/fullstack-prac/auth/packages/api/src/middleware/core/errorHandler.ts:101:18)\n    at Layer.handleError (/home/home/codes/web/udemy/fullstack-prac/auth/node_modules/.pnpm/router@2.2.0/node_modules/router/lib/layer.js:116:17)\n    at trimPrefix (/home/home/codes/web/udemy/fullstack-prac/auth/node_modules/.pnpm/router@2.2.0/node_modules/router/index.js:340:13)\n    at /home/home/codes/web/udemy/fullstack-prac/auth/node_modules/.pnpm/router@2.2.0/node_modules/router/index.js:297:9\n    at processParams (/home/home/codes/web/udemy/fullstack-prac/auth/node_modules/.pnpm/router@2.2.0/node_modules/router/index.js:582:12)\n    at next (/home/home/codes/web/udemy/fullstack-prac/auth/node_modules/.pnpm/router@2.2.0/node_modules/router/index.js:291:5)\n    at Layer.handleError (/home/home/codes/web/udemy/fullstack-prac/auth/node_modules/.pnpm/router@2.2.0/node_modules/router/lib/layer.js:111:12)\n    at trimPrefix (/home/home/codes/web/udemy/fullstack-prac/auth/node_modules/.pnpm/router@2.2.0/node_modules/router/index.js:340:13)\n    at /home/home/codes/web/udemy/fullstack-prac/auth/node_modules/.pnpm/router@2.2.0/node_modules/router/index.js:297:9\n    at processParams (/home/home/codes/web/udemy/fullstack-prac/auth/node_modules/.pnpm/router@2.2.0/node_modules/router/index.js:582:12)",
      "statusCode": 500,
      "errors": [],
      "success": false
    }
  },
  "An unexpected server error occurred"
]

 [31mâ¯[39m src/app.test.ts [2m([22m[2m7 tests[22m[2m | [22m[31m4 failed[39m[2m)[22m[33m 2362[2mms[22m[39m
[31m     [31mÃ—[31m should return health check response[39m[32m 71[2mms[22m[39m
     [32mâœ“[39m should return 404 for unknown routes[32m 7[2mms[22m[39m
     [32mâœ“[39m should return 301 redirect for /api-docs[32m 4[2mms[22m[39m
[31m     [31mÃ—[31m should return 200 OK for /api-docs/[39m[32m 5[2mms[22m[39m
[31m       [31mÃ—[31m should return 503 when the database is not connected[39m[32m 4[2mms[22m[39m
[31m       [31mÃ—[31m should return error when Redis is not connected[39m[32m 3[2mms[22m[39m
       [32mâœ“[39m should use i18nMiddleware.handle when NODE_ENV is not test[32m 6[2mms[22m[39m

[31mâ¯â¯â¯â¯â¯â¯â¯[39m[1m[41m Failed Tests 4 [49m[22m[31mâ¯â¯â¯â¯â¯â¯â¯[39m

[41m[1m FAIL [22m[49m src/app.test.ts[2m > [22mApp[2m > [22mshould return health check response
[31m[1mAssertionError[22m: expected 500 to be 200 // Object.is equality[39m

[32m- Expected[39m
[31m+ Received[39m

[32m- 200[39m
[31m+ 500[39m

[36m [2mâ¯[22m src/app.test.ts:[2m160:29[22m[39m
    [90m158| [39m  [34mit[39m([32m"should return health check response"[39m[33m,[39m [35masync[39m () [33m=>[39m {
    [90m159| [39m    [35mconst[39m response [33m=[39m [35mawait[39m [34mrequest[39m([34mgetApp[39m())[33m.[39m[35mget[39m([32m"/api/health"[39m)[33m;[39m
    [90m160| [39m    [34mexpect[39m(response[33m.[39mstatus)[33m.[39m[34mtoBe[39m([34m200[39m)[33m;[39m
    [90m   | [39m                            [31m^[39m
    [90m161| [39m    [34mexpect[39m(response[33m.[39mbody)[33m.[39m[34mtoHaveProperty[39m([32m"status"[39m[33m,[39m [32m"UP"[39m)[33m;[39m
    [90m162| [39m  })[33m;[39m

[31m[2mâ¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[1/4]â¯[22m[39m

[41m[1m FAIL [22m[49m src/app.test.ts[2m > [22mApp[2m > [22mshould return 200 OK for /api-docs/
[31m[1mAssertionError[22m: expected 500 to be 200 // Object.is equality[39m

[32m- Expected[39m
[31m+ Received[39m

[32m- 200[39m
[31m+ 500[39m

[36m [2mâ¯[22m src/app.test.ts:[2m176:29[22m[39m
    [90m174| [39m  [34mit[39m([32m"should return 200 OK for /api-docs/"[39m[33m,[39m [35masync[39m () [33m=>[39m {
    [90m175| [39m    [35mconst[39m response [33m=[39m [35mawait[39m [34mrequest[39m([34mgetApp[39m())[33m.[39m[35mget[39m([32m"/api/docs/"[39m)[33m;[39m
    [90m176| [39m    [34mexpect[39m(response[33m.[39mstatus)[33m.[39m[34mtoBe[39m([34m200[39m)[33m;[39m
    [90m   | [39m                            [31m^[39m
    [90m177| [39m  })[33m;[39m
    [90m178| [39m

[31m[2mâ¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[2/4]â¯[22m[39m

[41m[1m FAIL [22m[49m src/app.test.ts[2m > [22mApp[2m > [22mHealth Check Service Status[2m > [22mshould return 503 when the database is not connected
[31m[1mAssertionError[22m: expected 500 to be 503 // Object.is equality[39m

[32m- Expected[39m
[31m+ Received[39m

[32m- 503[39m
[31m+ 500[39m

[36m [2mâ¯[22m src/app.test.ts:[2m183:31[22m[39m
    [90m181| [39m      vi.mocked(getDatabaseService().ping).mockRejectedValueOnce(new Eâ€¦
    [90m182| [39m      [35mconst[39m response [33m=[39m [35mawait[39m [34mrequest[39m([34mgetApp[39m())[33m.[39m[35mget[39m([32m"/api/health"[39m)[33m;[39m
    [90m183| [39m      [34mexpect[39m(response[33m.[39mstatus)[33m.[39m[34mtoBe[39m([34m503[39m)[33m;[39m
    [90m   | [39m                              [31m^[39m
    [90m184| [39m    })[33m;[39m
    [90m185| [39m

[31m[2mâ¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[3/4]â¯[22m[39m

[41m[1m FAIL [22m[49m src/app.test.ts[2m > [22mApp[2m > [22mHealth Check Service Status[2m > [22mshould return error when Redis is not connected
[31m[1mAssertionError[22m: expected 500 to be 503 // Object.is equality[39m

[32m- Expected[39m
[31m+ Received[39m

[32m- 503[39m
[31m+ 500[39m

[36m [2mâ¯[22m src/app.test.ts:[2m195:31[22m[39m
    [90m193| [39m        console.log("DEBUG: response.body", JSON.stringify(response.boâ€¦
    [90m194| [39m      }
    [90m195| [39m      [34mexpect[39m(response[33m.[39mstatus)[33m.[39m[34mtoBe[39m([34m503[39m)[33m;[39m
    [90m   | [39m                              [31m^[39m
    [90m196| [39m
    [90m197| [39m    })[33m;[39m

[31m[2mâ¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[4/4]â¯[22m[39m


[2m Test Files [22m [1m[31m1 failed[39m[22m[2m | [22m[1m[32m2 passed[39m[22m[90m (3)[39m
[2m      Tests [22m [1m[31m4 failed[39m[22m[2m | [22m[1m[32m19 passed[39m[22m[90m (23)[39m
[2m   Start at [22m 19:16:51
[2m   Duration [22m 3.00s[2m (transform 974ms, setup 0ms, import 938ms, tests 2.41s, environment 1ms)[22m

/home/home/codes/web/udemy/fullstack-prac/auth/packages/api:
â€‰ERR_PNPM_RECURSIVE_RUN_FIRST_FAILâ€‰ @auth/api@1.0.0 test: `vitest run --coverage`
Exit status 1
â€‰ELIFECYCLEâ€‰ Test failed. See above for more details.
