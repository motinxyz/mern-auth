{"level":30,"time":"2025-12-01T20:23:57.874Z","pid":1514440,"hostname":"work","msg":"i18n initialized successfully"}
{"level":30,"time":"2025-12-01T20:23:57.892Z","pid":1514440,"hostname":"work","queue":"emailQueue","queueName":"emailQueue","msg":"Queue initialized"}
{"level":30,"time":"2025-12-01T20:23:57.893Z","pid":1514440,"hostname":"work","msg":"Email templates initialized successfully"}
{"level":30,"time":"2025-12-01T20:23:57.895Z","pid":1514440,"hostname":"work","module":"email-providers","msg":"Resend API provider initialized"}
{"level":30,"time":"2025-12-01T20:23:57.896Z","pid":1514440,"hostname":"work","module":"email-providers","host":"smtp.gmail.com","port":587,"msg":"SMTP transport configured"}
{"level":30,"time":"2025-12-01T20:23:58.568Z","pid":1514440,"hostname":"work","msg":"Redis connected successfully"}
{"level":30,"time":"2025-12-01T20:23:58.779Z","pid":1514440,"hostname":"work","msg":"Redis ready to accept commands"}
{"level":30,"time":"2025-12-01T20:24:00.827Z","pid":1514440,"hostname":"work","module":"email-providers","msg":"SMTP connection verified successfully"}
{"level":30,"time":"2025-12-01T20:24:00.828Z","pid":1514440,"hostname":"work","module":"email-providers","msg":"Initialized 2 email provider(s): resend-api, smtp"}
{"level":30,"time":"2025-12-01T20:24:00.829Z","pid":1514440,"hostname":"work","module":"email-service","msg":"Email service initialized successfully"}
{"level":30,"time":"2025-12-01T20:24:01.020Z","pid":1514440,"hostname":"work","msg":"MongoDB connected"}
{"level":40,"time":"2025-12-01T20:24:01.289Z","pid":1514440,"hostname":"work","msg":"MongoDB disconnected"}
{"level":50,"time":"2025-12-01T20:24:01.292Z","pid":1514440,"hostname":"work","err":{"type":"PoolClearedError","message":"Connection pool for ac-zznxupi-shard-00-01.42epyat.mongodb.net:27017 was cleared because another operation failed with: \"connect ETIMEDOUT 159.41.183.7:27017, connect ENETUNREACH 64:ff9b::9f29:b707:27017 - Local (:::0)\": connect ETIMEDOUT 159.41.183.7:27017, connect ENETUNREACH 64:ff9b::9f29:b707:27017 - Local (:::0): ","stack":"MongoPoolClearedError: Connection pool for ac-zznxupi-shard-00-01.42epyat.mongodb.net:27017 was cleared because another operation failed with: \"connect ETIMEDOUT 159.41.183.7:27017, connect ENETUNREACH 64:ff9b::9f29:b707:27017 - Local (:::0)\"\n    at ConnectionPool.processWaitQueue (/home/home/codes/web/udemy/fullstack-prac/auth/node_modules/.pnpm/mongodb@7.0.0/node_modules/mongodb/lib/cmap/connection_pool.js:504:82)\n    at ConnectionPool.clear (/home/home/codes/web/udemy/fullstack-prac/auth/node_modules/.pnpm/mongodb@7.0.0/node_modules/mongodb/lib/cmap/connection_pool.js:298:14)\n    at updateServers (/home/home/codes/web/udemy/fullstack-prac/auth/node_modules/.pnpm/mongodb@7.0.0/node_modules/mongodb/lib/sdam/topology.js:512:29)\n    at Topology.serverUpdateHandler (/home/home/codes/web/udemy/fullstack-prac/auth/node_modules/.pnpm/mongodb@7.0.0/node_modules/mongodb/lib/sdam/topology.js:413:9)\n    at Server.<anonymous> (/home/home/codes/web/udemy/fullstack-prac/auth/node_modules/.pnpm/mongodb@7.0.0/node_modules/mongodb/lib/sdam/topology.js:495:77)\n    at Server.emit (node:events:518:28)\n    at markServerUnknown (/home/home/codes/web/udemy/fullstack-prac/auth/node_modules/.pnpm/mongodb@7.0.0/node_modules/mongodb/lib/sdam/server.js:358:12)\n    at Server.handleError (/home/home/codes/web/udemy/fullstack-prac/auth/node_modules/.pnpm/mongodb@7.0.0/node_modules/mongodb/lib/sdam/server.js:263:17)\n    at /home/home/codes/web/udemy/fullstack-prac/auth/node_modules/.pnpm/mongodb@7.0.0/node_modules/mongodb/lib/cmap/connection_pool.js:450:25\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\ncaused by: MongoNetworkError: connect ETIMEDOUT 159.41.183.7:27017, connect ENETUNREACH 64:ff9b::9f29:b707:27017 - Local (:::0)\n    at TLSSocket.<anonymous> (/home/home/codes/web/udemy/fullstack-prac/auth/node_modules/.pnpm/mongodb@7.0.0/node_modules/mongodb/lib/cmap/connect.js:286:44)\n    at Object.onceWrapper (node:events:633:26)\n    at TLSSocket.emit (node:events:518:28)\n    at emitErrorNT (node:internal/streams/destroy:170:8)\n    at emitErrorCloseNT (node:internal/streams/destroy:129:3)\n    at processTicksAndRejections (node:internal/process/task_queues:90:21)\n    at runNextTicks (node:internal/process/task_queues:69:3)\n    at listOnTimeout (node:internal/timers:549:9)\n    at process.processTimers (node:internal/timers:523:7)\ncaused by: AggregateError [ETIMEDOUT]: \n    at internalConnectMultiple (node:net:1134:18)\n    at internalConnectMultiple (node:net:1210:5)\n    at Timeout.internalConnectMultipleTimeout (node:net:1742:5)\n    at listOnTimeout (node:internal/timers:590:11)\n    at process.processTimers (node:internal/timers:523:7)","errorLabelSet":{},"beforeHandshake":false,"address":"ac-zznxupi-shard-00-01.42epyat.mongodb.net:27017"},"msg":"Database connection error"}
{"level":40,"time":"2025-12-01T20:24:01.293Z","pid":1514440,"hostname":"work","msg":"Retrying connection in 2 seconds"}
{"level":30,"time":"2025-12-01T20:24:02.760Z","pid":1514440,"hostname":"work","msg":"MongoDB connected"}
{"level":40,"time":"2025-12-01T20:24:03.017Z","pid":1514440,"hostname":"work","msg":"MongoDB disconnected"}
{"level":30,"time":"2025-12-01T20:24:06.137Z","pid":1514440,"hostname":"work","msg":"MongoDB connected"}
{"level":30,"time":"2025-12-01T20:24:06.338Z","pid":1514440,"hostname":"work","msg":"Database ping successful."}
{"level":30,"time":"2025-12-01T20:24:06.338Z","pid":1514440,"hostname":"work","msg":"MongoDB connected successfully"}
{"level":30,"time":"2025-12-01T20:24:06.338Z","pid":1514440,"hostname":"work","msg":"All services started successfully"}
{"level":30,"time":"2025-12-01T20:24:06.341Z","pid":1514440,"hostname":"work","msg":"Starting email worker process..."}
{"level":30,"time":"2025-12-01T20:24:06.344Z","pid":1514440,"hostname":"work","msg":"Server is listening on port 3001"}
{"level":30,"time":"2025-12-01T20:24:06.368Z","pid":1514440,"hostname":"work","signal":"SIGTERM","msg":"Shutdown signal received: SIGTERM"}
{"level":30,"time":"2025-12-01T20:24:06.369Z","pid":1514440,"hostname":"work","msg":"HTTP server closed successfully"}
{"level":30,"time":"2025-12-01T20:24:06.370Z","pid":1514440,"hostname":"work","msg":"Shutting down worker services..."}
{"level":30,"time":"2025-12-01T20:24:06.370Z","pid":1514440,"hostname":"work","msg":"Shutting down worker service..."}
